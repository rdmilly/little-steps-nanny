aW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCcKCmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcCgpIHsKICBjb25zdCBbc2hvd1BvcnRhbCwgc2V0U2hvd1BvcnRhbF0gPSB1c2VTdGF0ZShmYWxzZSkKICBjb25zdCBbc2VsZWN0ZWRTZXJ2aWNlLCBzZXRTZWxlY3RlZFNlcnZpY2VdID0gdXNlU3RhdGUobnVsbCkKCiAgY29uc3Qgc2VydmljZXMgPSBbCiAgICB7CiAgICAgIGlkOiAxLAogICAgICBpY29uOiAn8J+MnycsCiAgICAgIHRpdGxlOiAnRnVsbC1EYXkgQ2FyZScsCiAgICAgIHByaWNlOiAnJDI1L2hyJywKICAgICAgZGVzY3JpcHRpb246ICdDb21wcmVoZW5zaXZlIGNhcmUgZnJvbSBtb3JuaW5nIHRocm91Z2ggZXZlbmluZywgaW5jbHVkaW5nIG1lYWxzLCBhY3Rpdml0aWVzLCBhbmQgbmFwdGltZS4nLAogICAgICBmZWF0dXJlczogWyc4KyBob3VycycsICdNZWFscyBpbmNsdWRlZCcsICdFZHVjYXRpb25hbCBhY3Rpdml0aWVzJywgJ0RhaWx5IHJlcG9ydCddCiAgICB9LAogICAgewogICAgICBpZDogMiwKICAgICAgaWNvbjogJ/CfjJknLAogICAgICB0aXRsZTogJ0V2ZW5pbmcgQ2FyZScsCiAgICAgIHByaWNlOiAnJDIyL2hyJywKICAgICAgZGVzY3JpcHRpb246ICdQZXJmZWN0IGZvciBkYXRlIG5pZ2h0cyBvciBldmVuaW5nIGV2ZW50cy4gSW5jbHVkZXMgZGlubmVyLCBiYXRoIHRpbWUsIGFuZCBiZWR0aW1lIHJvdXRpbmUuJywKICAgICAgZmVhdHVyZXM6IFsnNC02IGhvdXJzJywgJ0Rpbm5lciBwcmVwJywgJ0JlZHRpbWUgcm91dGluZScsICdMaWdodCBob3VzZWtlZXBpbmcnXQogICAgfSwKICAgIHsKICAgICAgaWQ6IDMsCiAgICAgIGljb246ICfwn5OaJywKICAgICAgdGl0bGU6ICdBZnRlciBTY2hvb2wnLAogICAgICBwcmljZTogJyQyMC9ocicsCiAgICAgIGRlc2NyaXB0aW9uOiAnSG9tZXdvcmsgaGVscCwgc25hY2tzLCBhbmQgc3VwZXJ2aXNlZCBwbGF5IHVudGlsIHBhcmVudHMgZ2V0IGhvbWUuJywKICAgICAgZmVhdHVyZXM6IFsnMy01IGhvdXJzJywgJ0hvbWV3b3JrIGhlbHAnLCAnSGVhbHRoeSBzbmFja3MnLCAnQWN0aXZpdHkgcGxhbm5pbmcnXQogICAgfSwKICAgIHsKICAgICAgaWQ6IDQsCiAgICAgIGljb246ICfwn46JJywKICAgICAgdGl0bGU6ICdTcGVjaWFsIEV2ZW50cycsCiAgICAgIHByaWNlOiAnJDMwL2hyJywKICAgICAgZGVzY3JpcHRpb246ICdCaXJ0aGRheSBwYXJ0aWVzLCBob2xpZGF5cywgb3IgYW55IHNwZWNpYWwgb2NjYXNpb24gcmVxdWlyaW5nIGV4dHJhIGNhcmUuJywKICAgICAgZmVhdHVyZXM6IFsnRmxleGlibGUgaG91cnMnLCAnUGFydHkgYXNzaXN0YW5jZScsICdNdWx0aXBsZSBjaGlsZHJlbicsICdXZWVrZW5kIGF2YWlsYWJsZSddCiAgICB9CiAgXQoKICBjb25zdCB0ZXN0aW1vbmlhbHMgPSBbCiAgICB7CiAgICAgIG5hbWU6ICdTYXJhaCBNLicsCiAgICAgIHJvbGU6ICdNb3RoZXIgb2YgMicsCiAgICAgIHRleHQ6ICdGaW5kaW5nIExpdHRsZSBTdGVwcyB3YXMgdGhlIGJlc3QgZGVjaXNpb24gd2UgbWFkZS4gT3VyIGtpZHMgYWJzb2x1dGVseSBhZG9yZSB0aGVpciBjYXJlZ2l2ZXIhJywKICAgICAgYXZhdGFyOiAn8J+RqeKAjfCfprAnCiAgICB9LAogICAgewogICAgICBuYW1lOiAnRGF2aWQgJiBMaXNhJywKICAgICAgcm9sZTogJ1BhcmVudHMgb2YgdG9kZGxlcicsCiAgICAgIHRleHQ6ICdUaGUgZGFpbHkgcmVwb3J0cyBhbmQgcGhvdG9zIGdpdmUgdXMgc3VjaCBwZWFjZSBvZiBtaW5kLiBQcm9mZXNzaW9uYWwgYW5kIGNhcmluZyBzZXJ2aWNlLicsCiAgICAgIGF2YXRhcjogJ/CfkajigI3wn5Gp4oCN8J+RpicKICAgIH0sCiAgICB7CiAgICAgIG5hbWU6ICdKZW5uaWZlciBLLicsCiAgICAgIHJvbGU6ICdXb3JraW5nIG1vbScsCiAgICAgIHRleHQ6ICdGbGV4aWJsZSBzY2hlZHVsaW5nIHRoYXQgYWN0dWFsbHkgd29ya3Mgd2l0aCBteSB1bnByZWRpY3RhYmxlIGhvdXJzLiBBIGxpZmVzYXZlciEnLAogICAgICBhdmF0YXI6ICfwn5Gp4oCN8J+SvCcKICAgIH0KICBdCgogIHJldHVybiAoCiAgICA8ZGl2IHN0eWxlPXt7IAogICAgICBmb250RmFtaWx5OiAiJ1F1aWNrc2FuZCcsIHNhbnMtc2VyaWYiLAogICAgICBtaW5IZWlnaHQ6ICcxMDB2aCcsCiAgICAgIGJhY2tncm91bmQ6ICdsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCAjRkZGQkVCIDAlLCAjRkZGIDUwJSknLAogICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJywKICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nCiAgICB9fT4KICAgICAgey8qIEZsb2F0aW5nIEdyYWRpZW50IE9yYnMgKi99CiAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJywKICAgICAgICB0b3A6ICctMTAwcHgnLAogICAgICAgIHJpZ2h0OiAnLTEwMHB4JywKICAgICAgICB3aWR0aDogJzQwMHB4JywKICAgICAgICBoZWlnaHQ6ICc0MDBweCcsCiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJywKICAgICAgICBiYWNrZ3JvdW5kOiAncmFkaWFsLWdyYWRpZW50KGNpcmNsZSwgcmdiYSgyNTUsMjE3LDYxLDAuMykgMCUsIHRyYW5zcGFyZW50IDcwJSknLAogICAgICAgIGFuaW1hdGlvbjogJ2Zsb2F0IDhzIGVhc2UtaW4tb3V0IGluZmluaXRlJywKICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsCiAgICAgICAgekluZGV4OiAwCiAgICAgIH19IC8+CiAgICAgIDxkaXYgc3R5bGU9e3sKICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJywKICAgICAgICBib3R0b206ICctMTUwcHgnLAogICAgICAgIGxlZnQ6ICctMTAwcHgnLAogICAgICAgIHdpZHRoOiAnNTAwcHgnLAogICAgICAgIGhlaWdodDogJzUwMHB4JywKICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLAogICAgICAgIGJhY2tncm91bmQ6ICdyYWRpYWwtZ3JhZGllbnQoY2lyY2xlLCByZ2JhKDExMCwyMDcsMTg5LDAuMjUpIDAlLCB0cmFuc3BhcmVudCA3MCUpJywKICAgICAgICBhbmltYXRpb246ICdmbG9hdCAxMHMgZWFzZS1pbi1vdXQgaW5maW5pdGUgcmV2ZXJzZScsCiAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLAogICAgICAgIHpJbmRleDogMAogICAgICB9fSAvPgogICAgICA8ZGl2IHN0eWxlPXt7CiAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsCiAgICAgICAgdG9wOiAnNDAlJywKICAgICAgICBsZWZ0OiAnNjAlJywKICAgICAgICB3aWR0aDogJzMwMHB4JywKICAgICAgICBoZWlnaHQ6ICczMDBweCcsCiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNTAlJywKICAgICAgICBiYWNrZ3JvdW5kOiAncmFkaWFsLWdyYWRpZW50KGNpcmNsZSwgcmdiYSgyNTUsMTQzLDE2MywwLjIpIDAlLCB0cmFuc3BhcmVudCA3MCUpJywKICAgICAgICBhbmltYXRpb246ICdmbG9hdCAxMnMgZWFzZS1pbi1vdXQgaW5maW5pdGUnLAogICAgICAgIHBvaW50ZXJFdmVudHM6ICdub25lJywKICAgICAgICB6SW5kZXg6IDAKICAgICAgfX0gLz4KCiAgICAgIDxzdHlsZT57YAogICAgICAgIEBpbXBvcnQgdXJsKCdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PU51bml0bzp3Z2h0QDUwMDs2MDA7NzAwOzgwMCZmYW1pbHk9UXVpY2tzYW5kOndnaHRANDAwOzUwMDs2MDA7NzAwJmRpc3BsYXk9c3dhcCcpOwogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgZmxvYXQgewogICAgICAgICAgMCUsIDEwMCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMHB4KSByb3RhdGUoMGRlZyk7IH0KICAgICAgICAgIDUwJSB7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtMzBweCkgcm90YXRlKDVkZWcpOyB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgYm91bmNlIHsKICAgICAgICAgIDAlLCAxMDAlIHsgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyB9CiAgICAgICAgICA1MCUgeyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTEwcHgpOyB9CiAgICAgICAgfQogICAgICAgIAogICAgICAgIEBrZXlmcmFtZXMgZmFkZUluVXAgewogICAgICAgICAgZnJvbSB7IG9wYWNpdHk6IDA7IHRyYW5zZm9ybTogdHJhbnNsYXRlWSgzMHB4KTsgfQogICAgICAgICAgdG8geyBvcGFjaXR5OiAxOyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLnNlcnZpY2UtY2FyZDpob3ZlciB7CiAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLThweCkgIWltcG9ydGFudDsKICAgICAgICAgIGJveC1zaGFkb3c6IDAgMjBweCA0MHB4IHJnYmEoMCwwLDAsMC4xMikgIWltcG9ydGFudDsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmJ0bi1wcmltYXJ5OmhvdmVyIHsKICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4wNSk7CiAgICAgICAgICBib3gtc2hhZG93OiAwIDhweCAyNXB4IHJnYmEoMjU1LDE0MywxNjMsMC40KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLmJ0bi1zZWNvbmRhcnk6aG92ZXIgewogICAgICAgICAgYmFja2dyb3VuZDogI0ZGRDkzRCAhaW1wb3J0YW50OwogICAgICAgICAgY29sb3I6ICMyRDMwNDcgIWltcG9ydGFudDsKICAgICAgICB9CiAgICAgIGB9PC9zdHlsZT4KCiAgICAgIHsvKiBIZWFkZXIgKi99CiAgICAgIDxoZWFkZXIgc3R5bGU9e3sKICAgICAgICBwb3NpdGlvbjogJ3N0aWNreScsCiAgICAgICAgdG9wOiAwLAogICAgICAgIHpJbmRleDogMTAwLAogICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDI1NSwyNTEsMjM1LDAuOSknLAogICAgICAgIGJhY2tkcm9wRmlsdGVyOiAnYmx1cigxMHB4KScsCiAgICAgICAgYm9yZGVyQm90dG9tOiAnMXB4IHNvbGlkIHJnYmEoMCwwLDAsMC4wNSknLAogICAgICAgIHBhZGRpbmc6ICcxNnB4IDQwcHgnCiAgICAgIH19PgogICAgICAgIDxuYXYgc3R5bGU9e3sKICAgICAgICAgIG1heFdpZHRoOiAnMTIwMHB4JywKICAgICAgICAgIG1hcmdpbjogJzAgYXV0bycsCiAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsCiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ3NwYWNlLWJldHdlZW4nLAogICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicKICAgICAgICB9fT4KICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBhbGlnbkl0ZW1zOiAnY2VudGVyJywgZ2FwOiAnMTJweCcgfX0+CiAgICAgICAgICAgIDxzcGFuIHN0eWxlPXt7IGZvbnRTaXplOiAnMzJweCcgfX0+8J+Rowkvspan